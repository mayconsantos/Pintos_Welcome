(()=>{"use strict";function n(n,t){return`\n`}function t(n){return decodeURIComponent((new RegExp(`[?|&]${n}=([^&;]+?)(&|#|;|$)`).exec(location.search)||[null,""])[1].replace(/\+/g,"%20"))||null}function e(n,t,e,o){const i={time:new Date,timezone:(new Date).getTimezoneOffset()/60,pageon:window.location.pathname,referrer:document.referrer,previousSites:history.length,browserName:navigator.appName,browserEngine:navigator.product,browserVersion1a:navigator.appVersion,browserVersion1b:navigator.userAgent,browserLanguage:navigator.language,browserOnline:navigator.onLine,browserPlatform:navigator.platform,javaEnabled:navigator.javaEnabled(),dataCookiesEnabled:navigator.cookieEnabled,dataCookies1:document.cookie,sizeScreenW:screen.width,sizeScreenH:screen.height,sizeInW:innerWidth,sizeInH:innerHeight,sizeAvailW:screen.availWidth,sizeAvailH:screen.availHeight,scrColorDepth:screen.colorDepth,scrPixelDepth:screen.pixelDepth},a=new Headers;a.append("Content-Type","application/json");const r={method:"POST",headers:a,body:JSON.stringify(Object.assign({version:1,trackingId:o||n.trackingID,clientId:n.clientId,buttonId:n.buttonId||"avatarButton",type:e,campaignName:t.utm_campaign,campaignSource:t.utm_source,campaignMedium:t.utm_medium,documentHostname:location.hostname,documentPage:window.location&&window.location.pathname,documentTitle:document.title},i))};fetch("https://prod-omnitracking.omni.chat/v1",r).then((n=>n.text())).then((n=>console.log(n))).catch((n=>console.error(n))),fetch("https://us-central1-prod-data-warehouse-312114.cloudfunctions.net/collect",r).then((n=>n.text())).then((n=>console.log(n))).catch((n=>console.error(n)))}function o(n){window.waButtonConfig.anonymousClientID=n.anonymousClientID,window.waButtonConfig.clientId=n.clientId,window.waButtonConfig.trackingID=n.trackingID,window.ocUtms=n.ocUtms}function i(n,t,e){return`@${n}-${t}-${e}`}function a(n,t){const e=new Date(n);return e.setDate(e.getDate()+t),e}function r(n,t,o=!0,i){e(window.waButtonConfig,t,"click",i);const{wabNumber:a}=n,r=n.anonymousClientID;var c;!function(n,t=!0){const e=document.createElement("a");e.setAttribute("href",n),t&&("Apple Computer, Inc."!==navigator.vendor&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener")),e.style.display="none",document.body.appendChild(e)),e.click(),e.remove()}(`https://wa.me/${a}?text=${c=`${n.message||"OlÃ¡! Gostaria de ser atendido."}\n\n${n.codeMessage||"O cÃ³digo do meu atendimento Ã©:"} ${r}`,encodeURI(c)}`,o)}function c(n,t,e,o){let a;n&&(n.removeAttribute("href"),n.addEventListener("click",(()=>{(null==o?void 0:o.index)&&(a=`OC-${window.waButtonConfig.retailerId}-${o.index}`,window.waButtonConfig.index=o.index,t.buttonId=o.id,t.anonymousClientID=i(t.clientId,t.retailerId,o.index)),r(t,e,!0,a)})),n.style.cursor="pointer")}const{retailerId:d,index:s,wabNumber:l,message:u,codeMessage:w}=Object.fromEntries(new URLSearchParams(window.location.search));var m;d&&(window.waButtonConfig={redirectOnly:!0,retailerId:d,index:s,wabNumber:l,message:u,codeMessage:w}),window.waButtonConfig&&(window.waButtonConfig.buttonId||window.waButtonConfig.redirectOnly,function(n){const e=localStorage.getItem(n);let r=!0;if(e){const n=JSON.parse(e);c=n.expiresIn,new Date>c||(o(n),r=!1)}var c;if(r){const e="xxxxxxxx".replace(/[xy]/g,(n=>{const t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)})),r={anonymousClientID:i(e,window.waButtonConfig.retailerId,window.waButtonConfig.index),clientId:e,trackingID:n,ocUtms:{utm_medium:t("utm_medium"),utm_source:t("utm_source"),utm_content:t("utm_content"),utm_campaign:t("utm_campaign"),utm_term:t("utm_term")},expiresIn:a(new Date,7)};localStorage.setItem(n,JSON.stringify(r)),o(r)}}(`OC-${window.waButtonConfig.retailerId}-${window.waButtonConfig.index||1}`),e(window.waButtonConfig,window.ocUtms,"pageView"),m=window.ocUtms,window.addEventListener("locationchange",(()=>{e(window.waButtonConfig,m,"pageView")})),window.waButtonConfig.redirectOnly?r(window.waButtonConfig,window.ocUtms,!1):function(n,t){n.buttonId?"string"==typeof(null==n?void 0:n.buttonId)?c(document.getElementById(n.buttonId||"avatarButton"),n,t):n.buttonId.forEach((e=>{c(document.getElementById(e.id),n,t,e)})):c(document.getElementById("avatarButton"),n,t)}(window.waButtonConfig,window.ocUtms))})();